$avatar-config: (
	dimension: var(--ladon-avatar-dimension),
	inner-circle-color: var(--ladon-theme-white),
	outer-circle-color: var(--ladon-primary),
	circle-border: 2px,
);

@mixin box-shadow($inner-color, $outer-color, $circle-border) {
	box-shadow: inset 0 0 0 $circle-border $inner-color, 0 0 0 $circle-border $outer-color,
		0 1px 8px fade-out(map-get($base-colors, theme-black), 0.7);
}

.avatar-wrapper {
	--ladon-avatar-dimension: 32px;
	--ladon-avatar-background: radial-gradient(circle at top, var(--ladon-theme-white), var(--ladon-theme-gray-110) 60%);

	$inner: map-get($avatar-config, inner-circle-color);
	$outer: map-get($avatar-config, outer-circle-color);
	$border: map-get($avatar-config, circle-border);
	@include box-shadow($inner, $outer, $border);

	flex: 0 0 auto;
	display: block;
	width: map-get($avatar-config, dimension);
	height: map-get($avatar-config, dimension);
	border-radius: 50%;
	overflow: hidden;
	background: var(--ladon-avatar-background);
	margin: 0.5rem 1rem 0.5rem;

	&:empty::before {
		content: attr(data-alias);
		text-transform: uppercase;
		position: absolute;
		color: var(--ladon-primary);
		font-size: 1em;
		letter-spacing: 0.1em;
		line-height: 1;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
	}

	img {
		object-fit: contain;
		width: 100%;
		height: 100%;
	}

	&[size="medium"] {
		--ladon-avatar-dimension: 64px;
		font-size: 1.5rem;
	}

	&[size="large"] {
		--ladon-avatar-dimension: 96px;
		font-size: 2rem;
	}

	& + .editable-icon {
		@include pseudo-tag;
		@include border-radius(50%);

		font-family: var(--ladon-vendor-material-icons);
		font-size: 1.2rem;
		color: var(--ladon-theme-white);

		display: block;
		background-color: var(--ladon-primary);
		width: 1.5rem;
		height: 1.5rem;
		position: absolute;
		right: 1rem;
		bottom: 0;
		box-shadow: 0 0 0 2px var(--ladon-theme-white);
	}
}

// Make sure to only make avatar interactions when placed in navbar
mf-ladon-main-nav .avatar-wrapper {
	&:hover {
		opacity: 0.7;
	}

	&:active {
		transform: scale(0.9);
	}

	& + .editable-icon {
		&:active {
			transform: scale(0.9);
		}

		&::before {
			content: "\F024";
			transform: translate(0.15rem, 0.1rem);
		}
	}
}
