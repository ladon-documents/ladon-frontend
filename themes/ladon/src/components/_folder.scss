$folder-config: (
	background: #{var(--ladon-primary)},
	hover-background: #{var(--ladon-primary-80)},
	personal: #{var(--ladon-personal-folder)},
);

@mixin folder-shadow() {
	box-shadow: inset 0 -2px 2px rgba(0, 0, 0, 0.1), inset 0 -4px 4px rgba(255, 255, 255, 0.1),
		inset 0 -6px 8px rgba(255, 255, 255, 0.16);
}

:is(.ladon-folder, app-folder, mf-ladon-folder) {
	$bg-color: map-get($folder-config, background);

	@include folder-shadow;
	container-type: inline-size;
	aspect-ratio: 1 / 0.7;
	border-radius: 0.5rem;
	padding: 1em 0.5em 1em;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	align-items: center;
	cursor: pointer;

	transition: transform map-get($ease, out-cubic) 350ms;
	color: var(--ladon-theme-white);
	background: $bg-color;

	&.active,
	&:hover {
		$bg-color: map-get($folder-config, hover-background);
		@include folder-shadow;
		background: $bg-color;
		transform: translateY(-5px);

		&::before {
			background: $bg-color;
		}
	}

	&:active {
		// transform: scale(0.95);
	}

	&::before,
	&::after {
		position: absolute;
	}

	&::before {
		border-radius: 0.5rem 0 0 0;
		background: var(--ladon-primary);
		content: "";
		top: 0;
		left: 0;
		width: 60%;
		height: 10px;
		transform: translate(10%, -115%);
		clip-path: polygon(0 0, 85% 0, 100% 100%, 0% 100%);
	}

	h3 {
		font-size: 1.25em;
	}

	&.oversize {
		font-size: 12px;
	}

	&.personal {
		$bg-color: map-get($folder-config, personal);
		@include folder-shadow;
		background: $bg-color;

		&::before {
			background: $bg-color;
		}

		h3 {
			text-shadow: 0 1px 1px var(--ladon-theme-white);
			color: var(--ladon-theme-black-120);
		}
	}

	:is(h3, span) {
		margin: 0;
		padding: 0;
		text-shadow: 0 1px 1px var(--ladon-theme-black);
	}

	& > footer {
		display: flex;
		width: 100%;
		justify-content: flex-end;

		span {
			color: var(--ladon-theme-black);
			font-weight: 500;
			font-size: small;
			letter-spacing: 0.05em;
			opacity: 0.5;
			text-shadow: 0 1px 0 var(--ladon-theme-white);
		}
	}
}

/**
 * This can be moved into a _icons.scss some day.
 * For now it lives here to style black folder icons
 */

img[src$="folder.svg"] {
	filter: invert(0.5) sepia(1) saturate(5) hue-rotate(190deg);
}
